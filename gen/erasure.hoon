/+  erasure
=,  erasure
:-  %say
|=  [[now=@da eny=@uv *] *]
=/  long-msg  'This is a very long message: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Volutpat est velit egestas dui id ornare arcu odio ut. Sodales ut eu sem integer vitae justo. Elementum facilisis leo vel fringilla est ullamcorper eget nulla. Consectetur purus ut faucibus pulvinar. Sed elementum tempus egestas sed sed risus pretium. Pulvinar etiam non quam lacus suspendisse faucibus interdum posuere lorem. Senectus et netus et malesuada fames ac turpis. Non curabitur gravida arcu ac tortor dignissim. Convallis aenean et tortor at. Tellus in metus vulputate eu scelerisque felis imperdiet proin. A arcu cursus vitae congue mauris rhoncus aenean vel elit. Egestas integer eget aliquet nibh praesent tristique magna. Metus dictum at tempor commodo. At lectus urna duis convallis convallis. Mauris in aliquam sem fringilla ut. Leo a diam sollicitudin tempor id. Lectus nulla at volutpat diam ut. Tristique senectus et netus et malesuada fames. Mi in nulla posuere sollicitudin aliquam ultrices. Purus sit amet luctus venenatis lectus magna fringilla urna. Auctor elit sed vulputate mi sit amet mauris commodo. Sit amet justo donec enim diam vulputate ut. Quam lacus suspendisse faucibus interdum posuere lorem ipsum dolor. Id aliquet lectus proin nibh nisl condimentum id venenatis a. Sed arcu non odio euismod lacinia at quis risus. Bibendum arcu vitae elementum curabitur vitae nunc. Amet facilisis magna etiam tempor. Nunc non blandit massa enim nec. Quisque non tellus orci ac auctor augue. In est ante in nibh mauris cursus mattis molestie. Odio aenean sed adipiscing diam donec adipiscing tristique risus. Rhoncus est pellentesque elit ullamcorper. Cras fermentum odio eu feugiat. Tellus rutrum tellus pellentesque eu tincidunt tortor aliquam nulla. Mauris pellentesque pulvinar pellentesque habitant morbi. Placerat duis ultricies lacus sed turpis tincidunt id. Id cursus metus aliquam eleifend. Amet dictum sit amet justo. At consectetur lorem donec massa sapien faucibus et molestie. Proin fermentum leo vel orci porta non pulvinar. Massa enim nec dui nunc mattis enim ut. Tincidunt lobortis feugiat vivamus at augue eget arcu dictum varius. Pulvinar sapien et ligula ullamcorper malesuada. Quam viverra orci sagittis eu. Sed nisi lacus sed viverra tellus in hac habitasse. Tortor at auctor urna nunc id cursus. Sed arcu non odio euismod lacinia at quis. Egestas sed sed risus pretium quam vulputate dignissim suspendisse. Porttitor massa id neque aliquam. Hac habitasse platea dictumst vestibulum rhoncus. Eleifend quam adipiscing vitae proin. Magna etiam tempor orci eu lobortis elementum nibh. Eget aliquet nibh praesent tristique magna sit amet purus gravida. Sed vulputate odio ut enim blandit volutpat maecenas volutpat blandit. Ornare arcu odio ut sem nulla. Ullamcorper dignissim cras tincidunt lobortis. Hendrerit gravida rutrum quisque non tellus orci. Pharetra pharetra massa massa ultricies mi quis hendrerit dolor. Turpis nunc eget lorem dolor. Sit amet risus nullam eget felis eget nunc. Laoreet non curabitur gravida arcu ac tortor dignissim convallis aenean. Mauris cursus mattis molestie a. Nulla at volutpat diam ut venenatis tellus. Parturient montes nascetur ridiculus mus mauris vitae ultricies leo. Ut tortor pretium viverra suspendisse potenti nullam. Consectetur adipiscing elit ut aliquam purus sit amet luctus. Vestibulum mattis ullamcorper velit sed ullamcorper morbi tincidunt. Etiam dignissim diam quis enim lobortis scelerisque fermentum. Interdum velit laoreet id donec ultrices tincidunt arcu. Arcu bibendum at varius vel pharetra vel turpis nunc. Lectus mauris ultrices eros in cursus turpis massa tincidunt. Massa tincidunt dui ut ornare lectus. Sed id semper risus in hendrerit gravida. Justo eget magna fermentum iaculis eu non diam phasellus. Pretium lectus quam id leo in vitae turpis massa sed. Nibh mauris cursus mattis molestie. Ut placerat orci nulla pellentesque dignissim enim. Quis lectus nulla at volutpat diam ut. Ac ut consequat semper viverra. Eget duis at tellus at urna condimentum. Nunc non blandit massa enim nec dui. Dolor sit amet consectetur adipiscing. Eu consequat ac felis donec et. Vulputate mi sit amet mauris commodo quis imperdiet. Feugiat nibh sed pulvinar proin gravida. Non nisi est sit amet facilisis. Tortor id aliquet lectus proin nibh nisl condimentum id venenatis. Sapien faucibus et molestie ac feugiat. Aliquet nec ullamcorper sit amet risus nullam eget. Sit amet facilisis magna etiam tempor orci. Velit aliquet sagittis id consectetur. Et ligula ullamcorper malesuada proin libero nunc consequat interdum varius. Suspendisse sed nisi lacus sed viverra. Neque viverra justo nec ultrices. Ornare lectus sit amet est placerat. Orci a scelerisque purus semper eget. Dignissim sodales ut eu sem. Eget sit amet tellus cras adipiscing enim eu turpis. Interdum velit laoreet id donec. Arcu odio ut sem nulla pharetra. Dignissim convallis aenean et tortor at risus viverra. Elit scelerisque mauris pellentesque pulvinar pellentesque habitant morbi tristique. Augue neque gravida in fermentum et sollicitudin ac orci phasellus. Proin fermentum leo vel orci. Congue nisi vitae suscipit tellus mauris a diam maecenas sed. Lacus vestibulum sed arcu non odio euismod lacinia. Orci dapibus ultrices in iaculis nunc sed augue lacus. Viverra tellus in hac habitasse platea. Nulla at volutpat diam ut venenatis tellus in metus. Laoreet suspendisse interdum consectetur libero id faucibus nisl tincidunt. A arcu cursus vitae congue. Sed euismod nisi porta lorem mollis aliquam ut porttitor leo. Rhoncus mattis rhoncus urna neque viverra justo nec. Varius morbi enim nunc faucibus a pellentesque sit. Faucibus a pellentesque sit amet porttitor eget dolor. Nunc sed blandit libero volutpat sed cras ornare arcu dui. Mauris ultrices eros in cursus turpis massa tincidunt. Sed vulputate odio ut enim blandit volutpat maecenas volutpat blandit. Cras fermentum odio eu feugiat pretium nibh ipsum. Aenean sed adipiscing diam donec adipiscing tristique. Congue mauris rhoncus aenean vel elit scelerisque mauris pellentesque pulvinar. Suspendisse sed nisi lacus sed viverra tellus in hac habitasse. Maecenas volutpat blandit aliquam etiam erat velit scelerisque in. Elit scelerisque mauris pellentesque pulvinar pellentesque habitant morbi tristique. Orci nulla pellentesque dignissim enim. Venenatis cras sed felis eget velit aliquet sagittis. Bibendum enim facilisis gravida neque convallis a. Orci eu lobortis elementum nibh tellus molestie nunc. Nisl nisi scelerisque eu ultrices vitae auctor eu augue ut. Sapien pellentesque habitant morbi tristique senectus et. Amet nulla facilisi morbi tempus iaculis urna id. Quam id leo in vitae. Est pellentesque elit ullamcorper dignissim cras tincidunt lobortis feugiat. Placerat in egestas erat imperdiet. Feugiat nisl pretium fusce id velit ut tortor. Placerat duis ultricies lacus sed turpis. Rhoncus dolor purus non enim. Nec feugiat in fermentum posuere urna nec tincidunt praesent. Duis at tellus at urna condimentum mattis pellentesque id. Nascetur ridiculus mus mauris vitae. Purus viverra accumsan in nisl nisi. Aliquam eleifend mi in nulla posuere sollicitudin aliquam ultrices. Elit ut aliquam purus sit amet luctus venenatis lectus. Leo vel fringilla est ullamcorper eget nulla facilisi etiam. Nec sagittis aliquam malesuada bibendum arcu. Sed turpis tincidunt id aliquet risus feugiat in ante metus. Sagittis orci a scelerisque purus semper eget duis at. Consectetur purus ut faucibus pulvinar elementum integer enim. Odio aenean sed adipiscing diam donec adipiscing. Semper quis lectus nulla at volutpat diam ut. In eu mi bibendum neque egestas. In hac habitasse platea dictumst vestibulum rhoncus est. Et pharetra pharetra massa massa ultricies mi quis hendrerit dolor. Nisi vitae suscipit tellus mauris a diam maecenas. Ipsum consequat nisl vel pretium lectus quam id leo. Tempor commodo ullamcorper Metus dictum at tempor commodo. At lectus urna duis convallis convallis. Mauris in aliquam sem fringilla ut. Leo a diam sollicitudin tempor id. Lectus nulla at volutpat diam ut. Tristique senectus et netus et malesuada fames. Mi in nulla posuere sollicitudin aliquam ultrices. Purus sit amet luctus venenatis lectus magna fringilla urna. Auctor elit sed vulputate mi sit amet mauris commodo. Sit amet justo donec enim diam vulputate ut. Quam lacus suspendisse faucibus interdum posuere lorem ipsum dolor. Id aliquet lectus proin nibh nisl condimentum id venenatis a. Sed arcu non odio euismod lacinia at quis risus. Bibendum arcu vitae elementum curabitur vitae nunc. Amet facilisis magna etiam tempor. Nunc non blandit massa enim nec. Quisque non tellus orci ac auctor augue. In est ante in nibh mauris cursus mattis molestie. Odio aenean sed adipiscing diam donec adipiscing tristique risus. Rhoncus est pellentesque elit ullamcorper. Cras fermentum odio eu feugiat. Tellus rutrum tellus pellentesque eu tincidunt tortor aliquam nulla. Mauris pellentesque pulvinar pellentesque habitant morbi. Placerat duis ultricies lacus sed turpis tincidunt id. Id cursus metus aliquam eleifend. Amet dictum sit amet justo. At consectetur lorem donec massa sapien faucibus et molestie. Proin fermentum leo vel orci porta non pulvinar. Massa enim nec dui nunc mattis enim ut. Tincidunt lobortis feugiat vivamus at augue eget arcu dictum varius. Pulvinar sapien et ligula ullamcorper malesuada. Quam viverra orci sagittis eu. Sed nisi lacus sed viverra tellus in hac habitasse. Tortor at auctor urna nunc id cursus. Sed arcu non odio euismod lacinia at quis. Egestas sed sed risus pretium quam vulputate dignissim suspendisse. Porttitor massa id neque aliquam. Hac habitasse platea dictumst vestibulum rhoncus. Eleifend quam adipiscing vitae proin. Magna etiam tempor orci eu lobortis elementum nibh. Eget aliquet nibh praesent tristique magna sit amet purus gravida. Sed vulputate odio ut enim blandit volutpat maecenas volutpat blandit. Ornare arcu odio ut sem nulla. Ullamcorper dignissim cras tincidunt lobortis. Hendrerit gravida rutrum quisque non tellus orci. Pharetra pharetra massa massa ultricies mi quis hendrerit dolor. Turpis nunc eget lorem dolor. Sit amet risus nullam eget felis eget nunc. Laoreet non curabitur gravida arcu ac tortor dignissim convallis aenean. Mauris cursus mattis molestie a. Nulla at volutpat diam ut venenatis tellus. Parturient montes nascetur ridiculus mus mauris vitae ultricies leo. Ut tortor pretium viverra suspendisse potenti nullam. Consectetur adipiscing elit ut aliquam purus sit amet luctus. Vestibulum mattis ullamcorper velit sed ullamcorper morbi tincidunt. Etiam dignissim diam quis enim lobortis scelerisque fermentum. Interdum velit laoreet id donec ultrices tincidunt arcu. Arcu bibendum at varius vel pharetra vel turpis nunc. Lectus mauris ultrices eros in cursus turpis massa tincidunt. Massa tincidunt dui ut ornare lectus. Sed id semper risus in hendrerit gravida. Justo eget magna fermentum iaculis eu non diam phasellus. Pretium lectus quam id leo in vitae turpis massa sed. Nibh mauris cursus mattis molestie. Ut placerat orci nulla pellentesque dignissim enim. Quis lectus nulla at volutpat diam ut. Ac ut consequat semper viverra. Eget duis at tellus at urna condimentum. Nunc non blandit massa enim nec dui. Dolor sit amet consectetur adipiscing. Eu consequat ac felis donec et. Vulputate mi sit amet mauris commodo quis imperdiet. Feugiat nibh sed pulvinar proin gravida. Non nisi est sit amet facilisis. Tortor id aliquet lectus proin nibh nisl condimentum id venenatis. Sapien faucibus et molestie ac feugiat. Aliquet nec ullamcorper sit amet risus nullam eget. Sit amet facilisis magna etiam tempor orci. Velit aliquet sagittis id consectetur. Et ligula ullamcorper malesuada proin libero nunc consequat interdum varius. Suspendisse sed nisi lacus sed viverra. Neque viverra justo nec ultrices. Ornare lectus sit amet est placerat. Orci a scelerisque purus semper eget. Dignissim sodales ut eu sem. Eget sit amet tellus cras adipiscing enim eu turpis. Interdum velit laoreet id donec. Arcu odio ut sem nulla pharetra. Dignissim convallis aenean et tortor at risus viverra. Elit scelerisque mauris pellentesque pulvinar pellentesque habitant morbi tristique. Augue neque gravida in fermentum et sollicitudin ac orci phasellus. Proin fermentum leo vel orci. Congue nisi vitae suscipit tellus mauris a diam maecenas sed. Lacus vestibulum sed arcu non odio euismod lacinia. Orci dapibus ultrices in iaculis nunc sed augue lacus. Viverra tellus in hac habitasse platea. Nulla at volutpat diam ut venenatis tellus in metus. Laoreet suspendisse interdum consectetur libero id faucibus nisl tincidunt. A arcu cursus vitae congue. Sed euismod nisi porta lorem mollis aliquam ut porttitor leo. Rhoncus mattis rhoncus urna neque viverra justo nec. Varius morbi enim nunc faucibus a pellentesque sit. Faucibus a pellentesque sit amet porttitor eget dolor. Nunc sed blandit libero volutpat sed cras ornare arcu dui. Mauris ultrices eros in cursus turpis massa tincidunt. Sed vulputate odio ut enim blandit volutpat maecenas volutpat blandit. Cras fermentum odio eu feugiat pretium nibh ipsum. Aenean sed adipiscing diam donec adipiscing tristique. Congue mauris rhoncus aenean vel elit scelerisque mauris pellentesque pulvinar. Suspendisse sed nisi lacus sed viverra tellus in hac habitasse. Maecenas volutpat blandit aliquam etiam erat velit scelerisque in. Elit scelerisque mauris pellentesque pulvinar pellentesque habitant morbi tristique. Orci nulla pellentesque dignissim enim. Venenatis cras sed felis eget velit aliquet sagittis. Bibendum enim facilisis gravida neque convallis a. Orci eu lobortis elementum nibh tellus molestie nunc. Nisl nisi scelerisque eu ultrices vitae auctor eu augue ut. Sapien pellentesque habitant morbi tristique senectus et. Amet nulla facilisi morbi tempus iaculis urna id. Quam id leo in vitae. Est pellentesque elit ullamcorper dignissim cras tincidunt lobortis feugiat. Placerat in egestas erat imperdiet. Feugiat nisl pretium fusce id velit ut tortor. Placerat duis ultricies lacus sed turpis. Rhoncus dolor purus non enim. Nec feugiat in fermentum posuere urna nec tincidunt praesent. Duis at tellus at urna condimentum mattis pellentesque id. Nascetur ridiculus mus mauris vitae. Purus viverra accumsan in nisl nisi. Aliquam eleifend mi in nulla posuere sollicitudin aliquam ultrices. Elit ut aliquam purus sit amet luctus venenatis lectus. Leo vel fringilla est ullamcorper eget nulla facilisi etiam. Nec sagittis aliquam malesuada bibendum arcu. Sed turpis tincidunt id aliquet risus feugiat in ante metus. Sagittis orci a scelerisque purus semper eget duis at. Consectetur purus ut faucibus pulvinar elementum integer enim. Odio aenean sed adipiscing diam donec adipiscing. Semper quis lectus nulla at volutpat diam ut. In eu mi bibendum neque egestas. In hac habitasse platea dictumst vestibulum rhoncus est. Et pharetra pharetra massa massa ultricies mi quis hendrerit dolor. Nisi vitae suscipit tellus mauris a diam maecenas. Ipsum consequat nisl vel pretium lectus quam id leo. Tempor commodo ullamcorper Metus dictum at tempor commodo. At lectus urna duis convallis convallis. Mauris in aliquam sem fringilla ut. Leo a diam sollicitudin tempor id. Lectus nulla at volutpat diam ut. Tristique senectus et netus et malesuada fames. Mi in nulla posuere sollicitudin aliquam ultrices. Purus sit amet luctus venenatis lectus magna fringilla urna. Auctor elit sed vulputate mi sit amet mauris commodo. Sit amet justo donec enim diam vulputate ut. Quam lacus suspendisse faucibus interdum posuere lorem ipsum dolor. Id aliquet lectus proin nibh nisl condimentum id venenatis a. Sed arcu non odio euismod lacinia at quis risus. Bibendum arcu vitae elementum curabitur vitae nunc. Amet facilisis magna etiam tempor. Nunc non blandit massa enim nec. Quisque non tellus orci ac auctor augue. In est ante in nibh mauris cursus mattis molestie. Odio aenean sed adipiscing diam donec adipiscing tristique risus. Rhoncus est pellentesque elit ullamcorper. Cras fermentum odio eu feugiat. Tellus rutrum tellus pellentesque eu tincidunt tortor aliquam nulla. Mauris pellentesque pulvinar pellentesque habitant morbi. Placerat duis ultricies lacus sed turpis tincidunt id. Id cursus metus aliquam eleifend. Amet dictum sit amet justo. At consectetur lorem donec massa sapien faucibus et molestie. Proin fermentum leo vel orci porta non pulvinar. Massa enim nec dui nunc mattis enim ut. Tincidunt lobortis feugiat vivamus at augue eget arcu dictum varius. Pulvinar sapien et ligula ullamcorper malesuada. Quam viverra orci sagittis eu. Sed nisi lacus sed viverra tellus in hac habitasse. Tortor at auctor urna nunc id cursus. Sed arcu non odio euismod lacinia at quis. Egestas sed sed risus pretium quam vulputate dignissim suspendisse. Porttitor massa id neque aliquam. Hac habitasse platea dictumst vestibulum rhoncus. Eleifend quam adipiscing vitae proin. Magna etiam tempor orci eu lobortis elementum nibh. Eget aliquet nibh praesent tristique magna sit amet purus gravida. Sed vulputate odio ut enim blandit volutpat maecenas volutpat blandit. Ornare arcu odio ut sem nulla. Ullamcorper dignissim cras tincidunt lobortis. Hendrerit gravida rutrum quisque non tellus orci. Pharetra pharetra massa massa ultricies mi quis hendrerit dolor. Turpis nunc eget lorem dolor. Sit amet risus nullam eget felis eget nunc. Laoreet non curabitur gravida arcu ac tortor dignissim convallis aenean. Mauris cursus mattis molestie a. Nulla at volutpat diam ut venenatis tellus. Parturient montes nascetur ridiculus mus mauris vitae ultricies leo. Ut tortor pretium viverra suspendisse potenti nullam. Consectetur adipiscing elit ut aliquam purus sit amet luctus. Vestibulum mattis ullamcorper velit sed ullamcorper morbi tincidunt. Etiam dignissim diam quis enim lobortis scelerisque fermentum. Interdum velit laoreet id donec ultrices tincidunt arcu. Arcu bibendum at varius vel pharetra vel turpis nunc. Lectus mauris ultrices eros in cursus turpis massa tincidunt. Massa tincidunt dui ut ornare lectus. Sed id semper risus in hendrerit gravida. Justo eget magna fermentum iaculis eu non diam phasellus. Pretium lectus quam id leo in vitae turpis massa sed. Nibh mauris cursus mattis molestie. Ut placerat orci nulla pellentesque dignissim enim. Quis lectus nulla at volutpat diam ut. Ac ut consequat semper viverra. Eget duis at tellus at urna condimentum. Nunc non blandit massa enim nec dui. Dolor sit amet consectetur adipiscing. Eu consequat ac felis donec et. Vulputate mi sit amet mauris commodo quis imperdiet. Feugiat nibh sed pulvinar proin gravida. Non nisi est sit amet facilisis. Tortor id aliquet lectus proin nibh nisl condimentum id venenatis. Sapien faucibus et molestie ac feugiat. Aliquet nec ullamcorper sit amet risus nullam eget. Sit amet facilisis magna etiam tempor orci. Velit aliquet sagittis id consectetur. Et ligula ullamcorper malesuada proin libero nunc consequat interdum varius. Suspendisse sed nisi lacus sed viverra. Neque viverra justo nec ultrices. Ornare lectus sit amet est placerat. Orci a scelerisque purus semper eget. Dignissim sodales ut eu sem. Eget sit amet tellus cras adipiscing enim eu turpis. Interdum velit laoreet id donec. Arcu odio ut sem nulla pharetra. Dignissim convallis aenean et tortor at risus viverra. Elit scel'
=/  short-msg  'abcdefghijklmnopqrstuvwxyz'
=/  nchunks  12
~&  >  "Input size: {<(div (met 3 long-msg) 1.024)>} kB"
=/  encoded  (encode long-msg nchunks)
=/  letters
  %+  turn
    chunks.encoded
  |=  c=@
  (rip 3 c)
:: can erase up to nchunks - (nchunks/2 - 1) pieces
=.  chunks.encoded
  (snap chunks.encoded 2 0)
=.  missing.encoded
  ~[2]
=/  letters
  %+  turn
    chunks.encoded
  |=  c=@
  (rip 3 c)  
=/  corrected
  (decode encoded)
::  
=/  decoded-message
  %+  turn
    corrected
  |=  [data=(list @) symbols=(list @)]
  data
::  remove padding bytes from last
=/  unpadded-rear
  (slag padding-bytes.encoded (rear decoded-message))
=.  decoded-message
  %+  snoc
    %-  snip  decoded-message
  unpadded-rear
=/  repairs-combined
  `@t`(rep 3 (zing decoded-message))
?:  ?!  =(long-msg repairs-combined)
  !! :: repaired msg doesn't match!
:-  %noun
"Repairs were successful."
